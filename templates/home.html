{% extends 'main.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'stylesheets/home.css' %}">

<div class="about_me">

    <div class="blob"></div>

    <section>
        <p>
            Hi,<br>I'm <span>Ahmed</span><br>Web Developer.
        </p>
        <button id="msg">
            Leave a message
        </button>
    </section>

</div>

<div class="message" id="msgfield">
        <label for="text_field">Write what you want</label>
        <textarea type="text" class="text_field" id="text_field"></textarea>
        <button id="send_msg">Send</button>
</div>

<div class="my_social_media">

    <a href="https://www.facebook.com/ahmed1.mustafa6" target='_blank'><img src="{% static 'svg/facebook.svg' %}"></a>
    <a href="https://www.instagram.com/ahmedmustafa.96/" target='_blank'><img src="{% static 'svg/instagram.svg' %}"></a>
    <a href="https://twitter.com/meAhmedMustafa" target='_blank'><img src="{% static 'svg/twitter.svg' %}"></a>
    <a href="https://github.com/devAhmedMustafa" target='_blank'><img src="{% static 'svg/github.svg' %}"></a>
    <a href="https://www.linkedin.com/in/ahmed-mustafa-67a224250/" target='_blank'><img src="{% static 'svg/linkedin.svg' %}"></a>
    
</div>

{% endblock %}

{% block javascript %}

<script>
    leavemsg = document.querySelector('#msg');
msgfield = document.querySelector('#msgfield');
textField = document.querySelector('#text_field')

leavemsg.addEventListener('click', function () {
    msgfield.style.display = 'flex';
})

sendBtn = document.querySelector('#send_msg');

sendBtn.addEventListener('click', function () {
    if ( textField.value.trim() == "" ){
        textField.style.border = '1px solid red';
    }
    else{
        textField.style.border = '1px solid black';
        $.ajax({
            url: '/send_msg/',
            data: {'message': textField.value},
            dataType: 'json',
            success: function(data){
                sendBtn.style.backgroundColor = 'green';
                sendBtn.innerHTML = 'Sent';
                textField.value = '';
                console.log(data.message);
                setTimeout(function(){
                    sendBtn.innerHTML = 'Send';
                    sendBtn.style.backgroundColor = 'white';
                    sendBtn.style.color = 'black';
                }, 2000)
            }
        })
    }
})
</script>

{% endblock %}